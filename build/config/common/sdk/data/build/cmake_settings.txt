#Specify a minimum required version for cmake
cmake_minimum_required(VERSION 2.4)

#Disable the need for cmake minimum required version in all files that
#include this.
IF (COMMAND cmake_policy)
   cmake_policy(SET CMP0000 OLD)
   cmake_policy(SET CMP0003 OLD)
ENDIF (COMMAND cmake_policy)

FILE(TO_CMAKE_PATH $ENV{SAFIR_SDK} SAFIR_SDK)
FILE(TO_CMAKE_PATH $ENV{SAFIR_RUNTIME} SAFIR_RUNTIME)

SET(PLATFORM $ENV{OS})

if (NOT DEFINED PLATFORM)
   SET(PLATFORM Linux)
endif(NOT DEFINED PLATFORM)

if(${PLATFORM} STREQUAL Windows_NT)
   SET(PLATFORM Windows)
endif(${PLATFORM} STREQUAL Windows_NT)

#MESSAGE("Platform is '${PLATFORM}'")

INCLUDE_DIRECTORIES($ENV{SAFIR_SDK}/include)

if (${PLATFORM} STREQUAL Linux)
   LINK_DIRECTORIES($ENV{SAFIR_RUNTIME}/lib)
   SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -Wall")
endif (${PLATFORM} STREQUAL Linux)

if (${PLATFORM} STREQUAL Windows)
   INCLUDE_DIRECTORIES("$ENV{BOOST_DIR}" "$ENV{ACE_ROOT}")
   LINK_DIRECTORIES($ENV{SAFIR_SDK}/lib "$ENV{BOOST_DIR}/lib" "$ENV{ACE_ROOT}/lib")
   ADD_DEFINITIONS(-DNOMINMAX)
   ADD_DEFINITIONS(-D_CRT_SECURE_NO_DEPRECATE -D_SCL_SECURE_NO_DEPRECATE -D_CRT_NONSTDC_NO_DEPRECATE)
   ADD_DEFINITIONS(-D_UNICODE -DUNICODE)

endif (${PLATFORM} STREQUAL Windows)
