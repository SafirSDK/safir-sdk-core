#command          directory                                config    extra_config
#extra_config is only built on windows.
#config is normally Release, but on windows we sometimes want the 
#debug configuration to be built too (e.g. for dlls that exists in two "flavors")

#CONFIG
build_dir        build/config                              Release

#check that patches have been applied
build_dir        build/patch_check                         Release

#LLUF
build_dir        src/lluf/lluf_config.ss/src                Release          Debug
build_dir        src/lluf/lluf_config_dump.ss/src           Release
build_dir        src/lluf/lluf_crash_reporter.ss/src        Release
build_dir        src/lluf/lluf_startup_synchronizer.ss/src  RelWithDebInfo
build_dir        src/lluf/lluf_utils.ss/src                 RelWithDebInfo   Debug
build_dir        src/lluf/lluf_logger_control.ss/src        RelWithDebInfo

#run the lluf unit tests
run_test_suite   src/lluf/lluf_config.ss/tests                 lluf_config_tests
run_test_suite   src/lluf/lluf_crash_reporter.ss/tests         lluf_crash_reporter_tests
run_test_suite   src/lluf/lluf_startup_synchronizer.ss/tests   lluf_startup_synchronizer_tests
run_test_suite   src/lluf/lluf_utils.ss/tests                  lluf_tests

#LOGGING
build_dir        src/logging/logging_library.ss/src        RelWithDebInfo
build_dir        src/logging/logging_cpp.ss/src            RelWithDebInfo   Debug
build_dir        src/logging/logging_dotnet.ss/src         RelWithDebInfo

#DOTS
build_dir        src/dots/dots_id.ss/src                   RelWithDebInfo
run_test_suite   src/dots/dots_id.ss/tests                 dots_id_tests
build_dir        src/dots/dots_kernel.ss/src               RelWithDebInfo
build_dir        src/dots/dots_configuration_check.ss/src  RelWithDebInfo
build_dir        src/dots/dots_schema_validator.ss         RelWithDebInfo
build_dir        src/dots/dots_cpp.ss/src                  RelWithDebInfo   Debug
run_test_suite   src/dots/dots_cpp.ss/tests/constants_test dots_cpp_constants_test
build_dir        src/dots/dots_dotnet.ss/src               RelWithDebInfo
build_dir        src/dots/dots_ada.ss                      RelWithDebInfo
build_dir        src/dots/dots_java.ss/src                 RelWithDebInfo
build_dir        src/dots/dots_v.ss                        RelWithDebInfo
build_dir        src/dots/dots_depends.ss                  RelWithDebInfo

#COPY DOB FILES
copy_dob_files   src/dose/dose_dou.ss/data                 safir_core
copy_dob_files   src/dose/dose_dou.ss/config               safir_core/config

copy_dob_files   src/swre/swre_dou.ss/data                 safir_core

copy_dob_files   src/foreach/foreach_dou.ss/data           safir_core
copy_dob_files   src/foreach/foreach_dou.ss/config         safir_core/config

copy_dob_files   src/douf/douf_dou.ss/config               safir_core/config

copy_dob_files   src/olib/olib_dou.ss/data                 safir_core

copy_dob_files   src/dope/dope_dou.ss/data                 safir_core
copy_dob_files   src/dope/dope_dou.ss/config               safir_core/config

#run dobmake to build dots_generated dlls/libs
dobmake

build_dir        src/dose/dose_internal.ss/src             RelWithDebInfo   Debug
run_test_suite   src/dose/dose_internal.ss/tests           dose_internal_tests
build_dir        src/dose/dose_dll.ss/src                  RelWithDebInfo
build_dir        src/dose/dose_cpp.ss/src                  RelWithDebInfo   Debug
build_dir        src/dose/dose_communication.ss/src        RelWithDebInfo   Debug
build_dir        src/dose/dose_main.ss/src                 RelWithDebInfo
run_test_suite   src/dose/dose_main.ss/tests               dose_main_tests
build_dir        src/dose/dose_dotnet.ss/src               RelWithDebInfo
build_dir        src/dose/dose_java.ss/src                 RelWithDebInfo
build_dir        src/dose/dose_ada.ss                      RelWithDebInfo
#TODO cmake file will move to src dir.

build_dir        src/dose/dose_sate.ss/src                 RelWithDebInfo
build_dir        src/dose/dose_dobexplorer.ss/src          RelWithDebInfo

#DOUF
build_dir        src/douf/douf_time_library.ss/src         RelWithDebInfo

#we need to build the douf_time subdirectories separately, since one of 
#them contain a cpp dll, which must be built in two flavors.
build_dir        src/douf/douf_time_interface.ss/cpp       RelWithDebInfo   Debug
build_dir        src/douf/douf_time_interface.ss/dotnet    RelWithDebInfo
build_dir        src/douf/douf_time_interface.ss/ada       RelWithDebInfo
build_dir        src/douf/douf_time_interface.ss/java       RelWithDebInfo
run_test_suite   src/douf/douf_time_interface.ss/tests     douf_time_tests

#this is really just some header files (a lot of stuff for just two files...),
#so we dont build it in release, even though it "looks" like a cpp dll.
build_dir        src/douf/douf_utilities.ss/src            RelWithDebInfo

#SWRE
build_dir        src/swre/swre_library.ss/src              RelWithDebInfo
build_dir        src/swre/swre_interface.ss/cpp/swre_interface_cpp         RelWithDebInfo   Debug
build_dir        src/swre/swre_interface.ss/dotnet/swre_interface_dotnet   RelWithDebInfo
build_dir        src/swre/swre_interface.ss/java           RelWithDebInfo
build_dir        src/swre/swre_interface.ss/ada            RelWithDebInfo
build_dir        src/swre/swre_backdoor.ss/src             RelWithDebInfo

#FOREACH
build_dir        src/foreach/foreach.ss/src                RelWithDebInfo

#OLIB
build_dir        src/olib/olib_code.ss/olib                RelWithDebInfo   Debug

#DOPE
build_dir        src/dope/dope_main.ss/src                 RelWithDebInfo

#swre tests need dope..
run_test_suite   src/swre/swre_test.ss                     swre_test

#Run static header checks to ensure only "good" headers have been included
run_test_suite   src/tests/header_check                    header_check

build_dir        docs/doxygen                              Release

#This will install the code examples under sdk/docs
build_dir        docs/examples                             Release
