<?xml version="1.0" encoding="utf-8"?>
<DoseTest.Items.TestCase>
  <Description xml:space="preserve">Try to register things on a lightnode (partner 4) that should not be possible to register</Description>
  <Expectation xml:space="preserve">Registrations should fail and noone should be told about them.</Expectation>
  <TestCaseSetupActions>
    <DoseTest.Action>
      <ActionKind>SubscribeRegistration</ActionKind>
      <Partner>0</Partner>
      <Consumer>0</Consumer>
      <TypeId>DoseTest.RootEntity</TypeId>
      <Handler>ALL_HANDLERS</Handler>
      <IncludeSubclasses>true</IncludeSubclasses>
      <RestartSubscription>false</RestartSubscription>
    </DoseTest.Action>
    <DoseTest.Action>
      <ActionKind>SubscribeRegistration</ActionKind>
      <Partner>2</Partner>
      <Consumer>0</Consumer>
      <TypeId>DoseTest.RootEntity</TypeId>
      <Handler>ALL_HANDLERS</Handler>
      <IncludeSubclasses>true</IncludeSubclasses>
      <RestartSubscription>false</RestartSubscription>
    </DoseTest.Action>
    <DoseTest.Action>
      <ActionKind>SubscribeRegistration</ActionKind>
      <Partner>3</Partner>
      <Consumer>0</Consumer>
      <TypeId>DoseTest.RootEntity</TypeId>
      <Handler>ALL_HANDLERS</Handler>
      <IncludeSubclasses>true</IncludeSubclasses>
      <RestartSubscription>false</RestartSubscription>
    </DoseTest.Action>
    <DoseTest.Action>
      <ActionKind>SubscribeRegistration</ActionKind>
      <Partner>4</Partner>
      <Consumer>0</Consumer>
      <TypeId>DoseTest.RootEntity</TypeId>
      <Handler>ALL_HANDLERS</Handler>
      <IncludeSubclasses>true</IncludeSubclasses>
      <RestartSubscription>false</RestartSubscription>
    </DoseTest.Action>

    <DoseTest.Action>
      <ActionKind>SubscribeRegistration</ActionKind>
      <Partner>0</Partner>
      <Consumer>0</Consumer>
      <TypeId>DoseTest.RootService</TypeId>
      <Handler>ALL_HANDLERS</Handler>
      <IncludeSubclasses>true</IncludeSubclasses>
      <RestartSubscription>false</RestartSubscription>
    </DoseTest.Action>
    <DoseTest.Action>
      <ActionKind>SubscribeRegistration</ActionKind>
      <Partner>2</Partner>
      <Consumer>0</Consumer>
      <TypeId>DoseTest.RootService</TypeId>
      <Handler>ALL_HANDLERS</Handler>
      <IncludeSubclasses>true</IncludeSubclasses>
      <RestartSubscription>false</RestartSubscription>
    </DoseTest.Action>
    <DoseTest.Action>
      <ActionKind>SubscribeRegistration</ActionKind>
      <Partner>3</Partner>
      <Consumer>0</Consumer>
      <TypeId>DoseTest.RootService</TypeId>
      <Handler>ALL_HANDLERS</Handler>
      <IncludeSubclasses>true</IncludeSubclasses>
      <RestartSubscription>false</RestartSubscription>
    </DoseTest.Action>
    <DoseTest.Action>
      <ActionKind>SubscribeRegistration</ActionKind>
      <Partner>4</Partner>
      <Consumer>0</Consumer>
      <TypeId>DoseTest.RootService</TypeId>
      <Handler>ALL_HANDLERS</Handler>
      <IncludeSubclasses>true</IncludeSubclasses>
      <RestartSubscription>false</RestartSubscription>
    </DoseTest.Action>

  </TestCaseSetupActions>
  <TestActions>
    <DoseTest.Action>
      <ActionKind>RegisterEntityHandler</ActionKind>
      <Partner>4</Partner>
      <Consumer>2</Consumer>
      <TypeId>DoseTest.GlobalEntity</TypeId>
      <Handler>RegisterEntityHandler-DoseTest.GlobalEntity</Handler>
      <InstanceIdPolicy>RequestorDecidesInstanceId</InstanceIdPolicy>
    </DoseTest.Action>
    <DoseTest.Action>
      <ActionKind>RegisterEntityHandlerPending</ActionKind>
      <Partner>4</Partner>
      <Consumer>2</Consumer>
      <TypeId>DoseTest.GlobalEntity</TypeId>
      <Handler>RegisterEntityHandlerPending-DoseTest.GlobalEntity</Handler>
      <InstanceIdPolicy>RequestorDecidesInstanceId</InstanceIdPolicy>
    </DoseTest.Action>
    <DoseTest.Action>
      <ActionKind>RegisterEntityHandlerPending</ActionKind>
      <Partner>4</Partner>
      <Consumer>2</Consumer>
      <TypeId>DoseTest.LocalEntity</TypeId>
      <Handler>RegisterEntityHandlerPending-DoseTest.LocalEntity</Handler>
      <InstanceIdPolicy>RequestorDecidesInstanceId</InstanceIdPolicy>
    </DoseTest.Action>
    <DoseTest.Action>
      <ActionKind>RegisterEntityHandlerPending</ActionKind>
      <Partner>4</Partner>
      <Consumer>2</Consumer>
      <TypeId>DoseTest.LimitedEntity</TypeId>
      <Handler>RegisterEntityHandlerPending-DoseTest.LimitedEntity</Handler>
      <InstanceIdPolicy>RequestorDecidesInstanceId</InstanceIdPolicy>
    </DoseTest.Action>
    <DoseTest.Action>
      <ActionKind>RegisterEntityHandlerInjection</ActionKind>
      <Partner>4</Partner>
      <Consumer>2</Consumer>
      <TypeId>DoseTest.InjectableEntity</TypeId>
      <Handler>RegisterEntityHandlerInjection-DoseTest.InjectableEntity</Handler>
      <InstanceIdPolicy>RequestorDecidesInstanceId</InstanceIdPolicy>
    </DoseTest.Action>

    <DoseTest.Action>
      <ActionKind>RegisterServiceHandler</ActionKind>
      <Partner>4</Partner>
      <Consumer>2</Consumer>
      <TypeId>DoseTest.GlobalService</TypeId>
      <Handler>RegisterServiceHandler-DoseTest.GlobalService</Handler>
      <InstanceIdPolicy>RequestorDecidesInstanceId</InstanceIdPolicy>
    </DoseTest.Action>
    <DoseTest.Action>
      <ActionKind>RegisterServiceHandlerPending</ActionKind>
      <Partner>4</Partner>
      <Consumer>2</Consumer>
      <TypeId>DoseTest.GlobalService</TypeId>
      <Handler>RegisterServiceHandlerPending-DoseTest.GlobalService</Handler>
      <InstanceIdPolicy>RequestorDecidesInstanceId</InstanceIdPolicy>
    </DoseTest.Action>
    <DoseTest.Action>
      <ActionKind>RegisterServiceHandlerPending</ActionKind>
      <Partner>4</Partner>
      <Consumer>2</Consumer>
      <TypeId>DoseTest.LocalService</TypeId>
      <Handler>RegisterServiceHandlerPending-DoseTest.LocalService</Handler>
      <InstanceIdPolicy>RequestorDecidesInstanceId</InstanceIdPolicy>
    </DoseTest.Action>
    <DoseTest.Action>
      <ActionKind>RegisterServiceHandlerPending</ActionKind>
      <Partner>4</Partner>
      <Consumer>2</Consumer>
      <TypeId>DoseTest.LimitedService</TypeId>
      <Handler>RegisterServiceHandlerPending-DoseTest.LimitedService</Handler>
      <InstanceIdPolicy>RequestorDecidesInstanceId</InstanceIdPolicy>
    </DoseTest.Action>
  </TestActions>
</DoseTest.Items.TestCase>
